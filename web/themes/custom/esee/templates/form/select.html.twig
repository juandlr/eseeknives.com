{#
/**
 * @file
 * Theme override for a select element.
 *
 * Available variables:
 * - attributes: HTML attributes for the <select> tag.
 * - options: The <option> element children.
 *
 * @see template_preprocess_select()
 */
#}
{% apply spaceless %}


  <div x-data="{
                  open: false,
                  selectedOption: 'Select your topic*',
                  options: [],
                  selectOption(option) {
                    console.log(option.value);
                    this.$refs.selectEl.value = option.value;
                    this.$refs.selectEl.dispatchEvent(new Event('change'));
                    this.selectedOption = option.text;
                    this.open = false;
                  },
                  init() {
                    this.options = [...this.$refs.selectEl.options].map(option => ({ value: option.value, text: option.text }));
                    this.selectedOption = this.options.find(option => option.value === this.$refs.selectEl.value).text;
                  }
                }" class="relative flex flex-row-reverse">
                  <select{{ attributes.addClass('hidden') }} x-ref="selectEl">
                    {% for option in options %}
                      {% if option.type == 'optgroup' %}
                        <optgroup label="{{ option.label }}">
                          {% for sub_option in option.options %}
                            <option value="{{ sub_option.value }}"{{ sub_option.selected ? ' selected="selected"' }}>{{ sub_option.label }}</option>
                          {% endfor %}
                        </optgroup>
                      {% elseif option.type == 'option' %}
                        <option value="{{ option.value }}"{{ option.selected ? ' selected="selected"' }}>{{ option.label }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>

    <div class="flex justify-between w-full cursor-pointer bg-white border"
         @click="open = !open">
      <div class="block w-full px-2 py-1 text-darkOlive"
           :class="selectedOption == 'Select your topic*' ? 'text-silverGray' : ''"
           x-text="selectedOption"></div>
      <i class="fa-solid text-gray-200 fa-chevron-down mt-2 mr-4"></i>
    </div>

    <div x-show="open" @click.away="open = false" class="absolute z-10 w-full min-w-28 bg-white first:text-gray-500 max-h-96 overflow-y-auto">
      <template x-for="(option, index) in options" :key="index">
        <div class="p-2 cursor-pointer hover:bg-darkOlive hover:text-white" @click="selectOption(option)">
          <div class="text-sm pl-2 " x-text="option.text"></div>
        </div>
      </template>
    </div>
  </div>
{% endapply %}
